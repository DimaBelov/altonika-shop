<div class="component-panel">

  <p *ngIf="filteredProducts && filteredProducts.length == 0" class="no-product-text">Извините, ничего не найдено</p>
  <md-grid-list cols="4" rowHeight="350px" #grid>
    <md-grid-tile
        *ngFor="let product of filteredProducts"
        [colspan]="1"
        [rowspan]="1">
      <div class="product-card">
        <div (mouseenter)="showBtn(product)" (mouseleave)="hideBtn(product)">
          <img class="product-card-img" 
            src="{{product.imageSource}}" 
            alt="Изображение не найдено({{product.id}})"
            onError="this.src = 'img-not-found.jpg'"
            (click)="openProductCard(product)">
          <button md-raised-button id="btn{{product.id}}" class="show-btn" (click)="openProductCardDialog(product)">
            Быстрый просмотр
          </button>
        </div>
        <div class="product-title">
          <a class="product-title-link" href='card?id={{product.id}}'
            mdTooltip="{{product.name}}" mdTooltipPosition="above">
            {{product.name}}
          </a>
        </div>
        <div>
          <button md-raised-button color="primary" class="basket-btn" 
            (click)="putInBasket(product)"
            *ngIf="!product.isDeleted">
            В корзину
          </button>
          <p *ngIf="product.isDeleted" class="is-deleted-text">Нет в наличии</p>
        </div>
      </div>
    </md-grid-tile>
  </md-grid-list>


  <div class="paginator bottom">

    <md-chip-list>
      <md-chip>
        {{paggingOptionsStatic.pageSize * paggingOptionsStatic.pageNumber <= paggingResult.totalCount ? paggingOptionsStatic.pageSize * paggingOptionsStatic.pageNumber : paggingResult.totalCount}}
        из
        {{paggingResult.totalCount}}
      </md-chip>
    </md-chip-list>

    <div class="next-prev-panel">
      <button md-icon-button (click)="firstPage()" [disabled]="!paggingResult.canPrev">
        <md-icon>first_page</md-icon>
      </button>
      <button md-icon-button (click)="prevPage()" [disabled]="!paggingResult.canPrev">
        <md-icon>navigate_before</md-icon>
      </button>
      
      <!-- <md-form-field class="page-number">
        <input mdInput type="number" [(ngModel)]="paggingOptionsStatic.pageNumber" (ngModelChange)="paggingChange()" max="5">
      </md-form-field> -->

      <md-chip-list class="page-number">
        <md-chip class="page-number-chip">
            {{paggingOptionsStatic.pageNumber}}
        </md-chip>
      </md-chip-list>

      <!-- <p class="page-number">
        {{paggingOptionsStatic.pageNumber}}
      </p> -->

      <!-- <div class="page-number-panel">
        <p *ngFor="let n of paggingResult.pageNumbers" class="page-number"
          id="page{{n}}"
          (click)="selectPage(n)">
          {{n}}
        </p>
      </div> -->

      <!-- <ul class="pagination">
        <li *ngFor="let n of paggingResult.pageNumbers" class="page-number" id="page{{n}}" (click)="selectPage(n)">{{n}}</li>
      </ul> -->

      <button md-icon-button (click)="nextPage()" [disabled]="!paggingResult.canNext">
        <md-icon>navigate_next</md-icon>
      </button>
      <button md-icon-button (click)="lastPage()" [disabled]="!paggingResult.canNext">
        <md-icon>last_page</md-icon>
      </button>
    </div>
    
    <md-select [(ngModel)]="paggingOptionsStatic.pageSize" (ngModelChange)="pageSizeChange()">
      <md-option *ngFor="let size of pageSizeOptions" [value]="size">
        {{ size }}
      </md-option>
    </md-select>
  </div>

  <!-- <div class="page-number-panel" style="width: 200px; height: 40px; overflow: hidden;">
    <div style="position: absolute;">
      <button *ngFor="let n of paggingResult.pageNumbers" class="page-number"
        id="page{{n}}"
        (click)="selectPage(n)">
        {{n}}
      </button>
    </div>
  </div> -->

</div>